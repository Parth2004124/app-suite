<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avalanche Private Equity Exchange</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a; /* Slate 900 */
            color: #e2e8f0; /* Slate 200 */
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1e293b; 
        }
        ::-webkit-scrollbar-thumb {
            background: #475569; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #64748b; 
        }

        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .avalanche-gradient {
            background: linear-gradient(135deg, #E84142 0%, #C72C33 100%);
        }
        
        .token-card:hover {
            transform: translateY(-2px);
            border-color: #E84142;
            transition: all 0.3s ease;
        }

        /* Console animation */
        @keyframes flash {
            0% { background-color: rgba(232, 65, 66, 0.2); }
            100% { background-color: transparent; }
        }
        .log-new {
            animation: flash 1s ease-out;
        }
        
        .loading-spinner {
            border: 3px solid rgba(255,255,255,0.1);
            border-radius: 50%;
            border-top: 3px solid #E84142;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="h-screen flex overflow-hidden">

    <!-- Sidebar -->
    <aside class="w-64 bg-slate-900 border-r border-slate-800 flex flex-col z-20">
        <div class="p-6 flex items-center gap-3">
            <div class="w-8 h-8 rounded bg-white flex items-center justify-center text-red-600 font-bold text-xl">
                <i class="fa-solid fa-mountain"></i>
            </div>
            <span class="text-xl font-bold tracking-tight text-white">EquiToken<span class="text-red-500">.avax</span></span>
        </div>

        <nav class="flex-1 px-4 space-y-2 mt-4">
            <a href="#" onclick="switchTab('dashboard')" id="nav-dashboard" class="nav-item flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg bg-red-500/10 text-red-400 border border-red-500/20 transition-colors">
                <i class="fa-solid fa-chart-pie w-5"></i>
                Dashboard
            </a>
            <a href="#" onclick="switchTab('market')" id="nav-market" class="nav-item flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg text-slate-400 hover:bg-slate-800 hover:text-white transition-colors">
                <i class="fa-solid fa-building-columns w-5"></i>
                Private Market
            </a>
            <a href="#" onclick="switchTab('portfolio')" id="nav-portfolio" class="nav-item flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg text-slate-400 hover:bg-slate-800 hover:text-white transition-colors">
                <i class="fa-solid fa-wallet w-5"></i>
                My Assets
            </a>
            <a href="#" onclick="switchTab('compliance')" id="nav-compliance" class="nav-item flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg text-slate-400 hover:bg-slate-800 hover:text-white transition-colors">
                <i class="fa-solid fa-shield-halved w-5"></i>
                KYC & Compliance
            </a>
        </nav>

        <div class="p-4 border-t border-slate-800">
            <div class="bg-slate-800 rounded-lg p-3">
                <div class="flex items-center gap-2 text-xs text-slate-400 mb-2">
                    <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                    Avalanche C-Chain
                </div>
                <div class="text-xs font-mono text-slate-500 break-all">
                    0x71C...92F
                </div>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 flex flex-col relative">
        <!-- Header -->
        <header class="h-16 border-b border-slate-800 bg-slate-900/50 backdrop-blur flex items-center justify-between px-8 z-10">
            <div class="text-sm text-slate-400">
                <span id="page-title" class="font-semibold text-white">Dashboard</span>
            </div>
            <div class="flex items-center gap-4">
                <button onclick="simulateGas()" class="flex items-center gap-2 px-3 py-1.5 rounded-full bg-slate-800 border border-slate-700 text-xs font-medium text-slate-300 hover:bg-slate-700">
                    <i class="fa-solid fa-gas-pump text-slate-500"></i>
                    <span id="gas-price">27 nAVAX</span>
                </button>
                <div class="h-8 w-8 rounded-full bg-gradient-to-tr from-blue-500 to-purple-500 flex items-center justify-center text-xs font-bold text-white shadow-lg shadow-purple-500/20">
                    PB
                </div>
            </div>
        </header>

        <!-- Content Area -->
        <div class="flex-1 overflow-y-auto p-8 relative" id="content-area">
            
            <!-- VIEW: DASHBOARD -->
            <div id="view-dashboard" class="space-y-6 animate-fade-in">
                <!-- Stats Row -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                    <div class="glass-panel rounded-xl p-6">
                        <div class="text-slate-400 text-xs font-medium uppercase tracking-wider mb-1">Total Portfolio Value</div>
                        <div class="text-2xl font-bold text-white">$1,245,000.00</div>
                        <div class="mt-2 text-xs text-green-400 flex items-center gap-1">
                            <i class="fa-solid fa-arrow-trend-up"></i>
                            +4.2% (30d)
                        </div>
                    </div>
                    <div class="glass-panel rounded-xl p-6">
                        <div class="text-slate-400 text-xs font-medium uppercase tracking-wider mb-1">Active Investments</div>
                        <div class="text-2xl font-bold text-white">3</div>
                        <div class="mt-2 text-xs text-slate-500">Private Funds</div>
                    </div>
                    <div class="glass-panel rounded-xl p-6">
                        <div class="text-slate-400 text-xs font-medium uppercase tracking-wider mb-1">Accreditation Status</div>
                        <div class="text-2xl font-bold text-green-500">Verified</div>
                        <div class="mt-2 text-xs text-slate-500">Securitize ID: #8821</div>
                    </div>
                    <div class="glass-panel rounded-xl p-6">
                        <div class="text-slate-400 text-xs font-medium uppercase tracking-wider mb-1">Next Liquidity Window</div>
                        <div class="text-2xl font-bold text-white">14 Days</div>
                        <div class="mt-2 text-xs text-orange-400">Quarterly Redemption</div>
                    </div>
                </div>

                <!-- Main Chart & Recent Activity -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 h-96">
                    <div class="lg:col-span-2 glass-panel rounded-xl p-6 flex flex-col">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-white font-medium">Portfolio Performance</h3>
                            <div class="flex gap-2">
                                <button class="px-2 py-1 text-xs rounded bg-slate-700 text-white">1M</button>
                                <button class="px-2 py-1 text-xs rounded hover:bg-slate-800 text-slate-400">1Y</button>
                                <button class="px-2 py-1 text-xs rounded hover:bg-slate-800 text-slate-400">ALL</button>
                            </div>
                        </div>
                        <div class="flex-1 relative w-full h-full">
                            <canvas id="portfolioChart"></canvas>
                        </div>
                    </div>

                    <div class="glass-panel rounded-xl p-0 flex flex-col overflow-hidden">
                        <div class="p-4 border-b border-slate-700 bg-slate-800/50">
                            <h3 class="text-white font-medium text-sm">Smart Contract Events</h3>
                        </div>
                        <div class="flex-1 overflow-y-auto p-4 space-y-3 font-mono text-xs" id="console-logs">
                            <!-- Logs injected here -->
                            <div class="flex gap-2 text-slate-500">
                                <span class="text-slate-600">[10:02:45]</span>
                                <span>Connecting to Avalanche Mainnet...</span>
                            </div>
                            <div class="flex gap-2 text-green-400">
                                <span class="text-slate-600">[10:02:46]</span>
                                <span>Connected. Block #34921022</span>
                            </div>
                            <div class="flex gap-2 text-slate-400">
                                <span class="text-slate-600">[10:03:12]</span>
                                <span>Querying NAV for SKHC token...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- VIEW: MARKETPLACE -->
            <div id="view-market" class="hidden space-y-6">
                <div class="flex justify-between items-end">
                    <div>
                        <h2 class="text-2xl font-bold text-white mb-2">Private Equity Opportunities</h2>
                        <p class="text-slate-400 text-sm max-w-2xl">
                            Institutional-grade funds tokenized on Avalanche. Access traditionally illiquid assets with lower minimums and enhanced transparency.
                        </p>
                    </div>
                    <div class="flex gap-3">
                        <select class="bg-slate-800 border border-slate-700 text-white text-sm rounded-lg px-3 py-2 outline-none">
                            <option>All Sectors</option>
                            <option>Healthcare</option>
                            <option>Technology</option>
                            <option>Real Estate</option>
                        </select>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- KKR Fund Card -->
                    <div class="glass-panel rounded-xl p-6 token-card border-t-4 border-t-red-500 cursor-pointer relative overflow-hidden group">
                        <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity">
                            <i class="fa-solid fa-rocket text-6xl"></i>
                        </div>
                        <div class="flex justify-between items-start mb-4">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 bg-white rounded-full flex items-center justify-center text-slate-900 font-bold text-xl shadow-lg">K</div>
                                <div>
                                    <h3 class="font-bold text-white">Health Care Strategic Growth II</h3>
                                    <div class="text-xs text-slate-400 font-mono">TKR: SKHC</div>
                                </div>
                            </div>
                            <span class="bg-green-500/20 text-green-400 px-2 py-1 rounded text-xs font-medium border border-green-500/20">Open</span>
                        </div>
                        
                        <div class="space-y-3 mb-6">
                            <div class="flex justify-between text-sm">
                                <span class="text-slate-500">NAV / Token</span>
                                <span class="text-white font-medium">$1,024.50</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-slate-500">Min Investment</span>
                                <span class="text-white font-medium">$100,000</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-slate-500">Lock-up Period</span>
                                <span class="text-white font-medium">1 Year</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-slate-500">Management Fee</span>
                                <span class="text-white font-medium">1.25%</span>
                            </div>
                        </div>

                        <div class="flex gap-3">
                            <button onclick="openModal('SKHC')" class="flex-1 bg-white text-slate-900 font-medium py-2 rounded-lg hover:bg-slate-200 transition-colors">Invest</button>
                            <button class="px-3 py-2 border border-slate-600 rounded-lg hover:bg-slate-800 text-slate-300">
                                <i class="fa-regular fa-file-pdf"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Apollo Fund Card -->
                    <div class="glass-panel rounded-xl p-6 token-card border-t-4 border-t-blue-500 cursor-pointer relative overflow-hidden group">
                        <div class="flex justify-between items-start mb-4">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 bg-white rounded-full flex items-center justify-center text-slate-900 font-bold text-xl shadow-lg">A</div>
                                <div>
                                    <h3 class="font-bold text-white">Apollo Debt Solutions</h3>
                                    <div class="text-xs text-slate-400 font-mono">TKR: ADSF</div>
                                </div>
                            </div>
                            <span class="bg-slate-700/50 text-slate-400 px-2 py-1 rounded text-xs font-medium border border-slate-600">Waitlist</span>
                        </div>
                        
                        <div class="space-y-3 mb-6">
                            <div class="flex justify-between text-sm">
                                <span class="text-slate-500">NAV / Token</span>
                                <span class="text-white font-medium">$25.10</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-slate-500">Min Investment</span>
                                <span class="text-white font-medium">$25,000</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-slate-500">Yield (TTM)</span>
                                <span class="text-white font-medium">9.4%</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-slate-500">Strategy</span>
                                <span class="text-white font-medium">Private Credit</span>
                            </div>
                        </div>

                        <button class="w-full border border-slate-600 text-slate-300 font-medium py-2 rounded-lg hover:bg-slate-800 transition-colors">Join Waitlist</button>
                    </div>

                    <!-- Real Estate Fund -->
                    <div class="glass-panel rounded-xl p-6 token-card border-t-4 border-t-emerald-500 cursor-pointer relative overflow-hidden group">
                        <div class="flex justify-between items-start mb-4">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 bg-white rounded-full flex items-center justify-center text-slate-900 font-bold text-xl shadow-lg">H</div>
                                <div>
                                    <h3 class="font-bold text-white">Hamilton Lane Global</h3>
                                    <div class="text-xs text-slate-400 font-mono">TKR: HLGP</div>
                                </div>
                            </div>
                            <span class="bg-green-500/20 text-green-400 px-2 py-1 rounded text-xs font-medium border border-green-500/20">Open</span>
                        </div>
                        
                        <div class="space-y-3 mb-6">
                            <div class="flex justify-between text-sm">
                                <span class="text-slate-500">NAV / Token</span>
                                <span class="text-white font-medium">$142.80</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-slate-500">Min Investment</span>
                                <span class="text-white font-medium">$50,000</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-slate-500">Asset Class</span>
                                <span class="text-white font-medium">Secondary Equity</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-slate-500">Vintage</span>
                                <span class="text-white font-medium">2024</span>
                            </div>
                        </div>

                        <div class="flex gap-3">
                            <button onclick="openModal('HLGP')" class="flex-1 bg-white text-slate-900 font-medium py-2 rounded-lg hover:bg-slate-200 transition-colors">Invest</button>
                            <button class="px-3 py-2 border border-slate-600 rounded-lg hover:bg-slate-800 text-slate-300">
                                <i class="fa-regular fa-file-pdf"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- VIEW: COMPLIANCE -->
            <div id="view-compliance" class="hidden max-w-3xl mx-auto space-y-6">
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-bold text-white">Investor Passport</h2>
                    <p class="text-slate-400 mt-2">Your on-chain identity token regulates your access to restricted assets.</p>
                </div>

                <div class="glass-panel rounded-xl p-8 border border-green-500/30 bg-green-500/5">
                    <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 rounded-full bg-green-500 flex items-center justify-center text-slate-900 text-xl">
                                <i class="fa-solid fa-check"></i>
                            </div>
                            <div>
                                <h3 class="text-white font-bold text-lg">Accredited Investor Status</h3>
                                <p class="text-slate-400 text-sm">Verified via Securitize ID</p>
                            </div>
                        </div>
                        <span class="px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-xs font-mono">0xKYC...VALID</span>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div class="p-3 bg-slate-800 rounded-lg flex justify-between">
                            <span class="text-slate-400">Jurisdiction</span>
                            <span class="text-white">United States (Reg D)</span>
                        </div>
                        <div class="p-3 bg-slate-800 rounded-lg flex justify-between">
                            <span class="text-slate-400">KYC Renewal</span>
                            <span class="text-white">12 Dec 2026</span>
                        </div>
                        <div class="p-3 bg-slate-800 rounded-lg flex justify-between">
                            <span class="text-slate-400">AML Check</span>
                            <span class="text-green-400">Passed</span>
                        </div>
                        <div class="p-3 bg-slate-800 rounded-lg flex justify-between">
                            <span class="text-slate-400">Wallet Whitelist</span>
                            <span class="text-white">0x71C...92F</span>
                        </div>
                    </div>
                </div>

                <div class="glass-panel rounded-xl p-6">
                    <h3 class="text-white font-medium mb-4">Pending Actions</h3>
                    <div class="flex items-center gap-4 p-4 border border-dashed border-slate-600 rounded-lg">
                        <i class="fa-regular fa-file-lines text-slate-400 text-xl"></i>
                        <div class="flex-1">
                            <div class="text-white font-medium text-sm">Tax Document Certification (W-9)</div>
                            <div class="text-slate-500 text-xs">Required for 2026 distributions</div>
                        </div>
                        <button class="text-sm bg-slate-700 hover:bg-slate-600 text-white px-3 py-1.5 rounded">Sign Now</button>
                    </div>
                </div>
            </div>

            <!-- VIEW: PORTFOLIO -->
            <div id="view-portfolio" class="hidden space-y-6">
                <h2 class="text-2xl font-bold text-white mb-6">My Assets</h2>
                
                <div class="glass-panel rounded-xl overflow-hidden">
                    <table class="w-full text-left">
                        <thead class="bg-slate-800 text-xs uppercase text-slate-400">
                            <tr>
                                <th class="p-4">Asset</th>
                                <th class="p-4">Balance (Tokens)</th>
                                <th class="p-4">Current Value</th>
                                <th class="p-4">Avg Cost</th>
                                <th class="p-4">Unrealized P/L</th>
                                <th class="p-4">Status</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-700 text-sm">
                            <tr class="hover:bg-slate-800/50">
                                <td class="p-4">
                                    <div class="flex items-center gap-3">
                                        <div class="w-8 h-8 rounded bg-white text-slate-900 flex items-center justify-center font-bold">K</div>
                                        <div>
                                            <div class="font-medium text-white">KKR Health Care II</div>
                                            <div class="text-xs text-slate-500">SKHC</div>
                                        </div>
                                    </div>
                                </td>
                                <td class="p-4 text-white font-mono">500.00</td>
                                <td class="p-4 text-white font-medium">$512,250.00</td>
                                <td class="p-4 text-slate-400">$980.00</td>
                                <td class="p-4 text-green-400">+ $22,250.00 (4.5%)</td>
                                <td class="p-4"><span class="bg-orange-500/20 text-orange-400 px-2 py-1 rounded-full text-xs">Locked (11mo)</span></td>
                            </tr>
                            <tr class="hover:bg-slate-800/50">
                                <td class="p-4">
                                    <div class="flex items-center gap-3">
                                        <div class="w-8 h-8 rounded bg-slate-700 text-white flex items-center justify-center font-bold">U</div>
                                        <div>
                                            <div class="font-medium text-white">USDC (Avalanche)</div>
                                            <div class="text-xs text-slate-500">Stablecoin</div>
                                        </div>
                                    </div>
                                </td>
                                <td class="p-4 text-white font-mono">732,750.00</td>
                                <td class="p-4 text-white font-medium">$732,750.00</td>
                                <td class="p-4 text-slate-400">$1.00</td>
                                <td class="p-4 text-slate-400">--</td>
                                <td class="p-4"><span class="bg-green-500/20 text-green-400 px-2 py-1 rounded-full text-xs">Liquid</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </main>

    <!-- Investment Modal -->
    <div id="invest-modal" class="fixed inset-0 bg-black/80 backdrop-blur-sm hidden z-50 flex items-center justify-center">
        <div class="glass-panel w-full max-w-lg rounded-xl shadow-2xl transform transition-all border border-slate-700">
            <div class="p-6 border-b border-slate-700 flex justify-between items-center">
                <div>
                    <h3 class="text-xl font-bold text-white">Invest in <span id="modal-token-symbol">SKHC</span></h3>
                    <p class="text-xs text-slate-400">Powered by Avalanche C-Chain</p>
                </div>
                <button onclick="closeModal()" class="text-slate-400 hover:text-white"><i class="fa-solid fa-xmark text-xl"></i></button>
            </div>
            
            <div class="p-6 space-y-4">
                <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                    <div class="flex justify-between text-sm mb-2">
                        <span class="text-slate-400">Available Balance</span>
                        <span class="text-white font-mono">732,750 USDC</span>
                    </div>
                    <div class="relative">
                        <input type="number" id="invest-amount" class="w-full bg-transparent text-2xl font-bold text-white outline-none" placeholder="0.00" oninput="calculateTokens()">
                        <span class="absolute right-0 top-1/2 -translate-y-1/2 text-slate-500 font-medium">USDC</span>
                    </div>
                </div>

                <div class="flex justify-center text-slate-500">
                    <i class="fa-solid fa-arrow-down"></i>
                </div>

                <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                    <div class="flex justify-between text-sm mb-2">
                        <span class="text-slate-400">Estimated Receive</span>
                        <span class="text-xs text-slate-500">NAV: $1,024.50</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span id="token-est" class="text-2xl font-bold text-white">0.00</span>
                        <span id="modal-token-name" class="text-slate-500 font-medium">SKHC</span>
                    </div>
                </div>

                <div class="space-y-2 text-xs text-slate-400 mt-4">
                    <div class="flex justify-between">
                        <span>Gas Fee (Avalanche)</span>
                        <span class="text-white">~0.002 AVAX ($0.08)</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Platform Fee (0.5%)</span>
                        <span id="platform-fee" class="text-white">0 USDC</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span>Compliance Check</span>
                        <span class="text-green-400 flex items-center gap-1"><i class="fa-solid fa-check-circle"></i> Whitelisted</span>
                    </div>
                </div>
            </div>

            <div class="p-6 border-t border-slate-700">
                <button onclick="executeTrade()" id="confirm-btn" class="w-full bg-white text-slate-900 font-bold py-3 rounded-lg hover:bg-slate-200 transition-colors flex items-center justify-center gap-2">
                    Confirm Investment
                </button>
            </div>
        </div>
    </div>

    <script>
        // State
        let currentTab = 'dashboard';
        const NAV_PRICE = 1024.50;
        
        // Navigation Logic
        function switchTab(tabId) {
            // Update UI State
            document.querySelectorAll('.nav-item').forEach(el => {
                el.classList.remove('bg-red-500/10', 'text-red-400', 'border', 'border-red-500/20');
                el.classList.add('text-slate-400', 'hover:bg-slate-800', 'hover:text-white');
            });
            
            const activeNav = document.getElementById(`nav-${tabId}`);
            activeNav.classList.remove('text-slate-400', 'hover:bg-slate-800', 'hover:text-white');
            activeNav.classList.add('bg-red-500/10', 'text-red-400', 'border', 'border-red-500/20');

            // Hide all views
            document.getElementById('view-dashboard').classList.add('hidden');
            document.getElementById('view-market').classList.add('hidden');
            document.getElementById('view-portfolio').classList.add('hidden');
            document.getElementById('view-compliance').classList.add('hidden');

            // Show selected view
            const view = document.getElementById(`view-${tabId}`);
            view.classList.remove('hidden');
            view.classList.add('animate-fade-in');

            // Update Header
            const titles = {
                'dashboard': 'Dashboard',
                'market': 'Private Market / Primary Issuance',
                'portfolio': 'Portfolio & Liquidity',
                'compliance': 'Regulatory Identity (KYC/AML)'
            };
            document.getElementById('page-title').innerText = titles[tabId];
            
            // Re-render chart if dashboard
            if(tabId === 'dashboard') initChart();
        }

        // Chart Logic
        function initChart() {
            const ctx = document.getElementById('portfolioChart').getContext('2d');
            
            // Gradient
            const gradient = ctx.createLinearGradient(0, 0, 0, 400);
            gradient.addColorStop(0, 'rgba(232, 65, 66, 0.5)'); // Red
            gradient.addColorStop(1, 'rgba(232, 65, 66, 0.0)');

            if(window.myChart) window.myChart.destroy();

            window.myChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Portfolio Value',
                        data: [1100000, 1120000, 1150000, 1145000, 1180000, 1245000],
                        borderColor: '#E84142',
                        backgroundColor: gradient,
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#fff',
                        pointRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            display: false,
                            grid: { display: false }
                        },
                        x: {
                            grid: { color: 'rgba(255,255,255,0.05)' },
                            ticks: { color: '#94a3b8' }
                        }
                    }
                }
            });
        }

        // Console Logging Simulation
        function addLog(message, type = 'info') {
            const consoleDiv = document.getElementById('console-logs');
            const row = document.createElement('div');
            const time = new Date().toLocaleTimeString('en-US', {hour12: false});
            
            let colorClass = 'text-slate-400';
            if(type === 'success') colorClass = 'text-green-400';
            if(type === 'tx') colorClass = 'text-blue-400';
            if(type === 'error') colorClass = 'text-red-400';

            row.className = `flex gap-2 ${colorClass} log-new font-mono text-xs`;
            row.innerHTML = `<span class="text-slate-600">[${time}]</span><span>${message}</span>`;
            
            consoleDiv.prepend(row); // Add to top
        }

        // Modal Logic
        function openModal(symbol) {
            document.getElementById('invest-modal').classList.remove('hidden');
            document.getElementById('modal-token-symbol').innerText = symbol;
            document.getElementById('modal-token-name').innerText = symbol;
            document.getElementById('invest-amount').value = '';
            document.getElementById('token-est').innerText = '0.00';
            addLog(`Initializing purchase intent for ${symbol}...`);
            addLog(`Checking Whitelist status for 0x71C...92F on RegistryContract...`, 'tx');
            setTimeout(() => addLog(`Whitelist Verified: User is Accredited Investor (Reg D).`, 'success'), 800);
        }

        function closeModal() {
            document.getElementById('invest-modal').classList.add('hidden');
        }

        function calculateTokens() {
            const amount = parseFloat(document.getElementById('invest-amount').value) || 0;
            const tokens = amount / NAV_PRICE;
            const fee = amount * 0.005;
            
            document.getElementById('token-est').innerText = tokens.toFixed(4);
            document.getElementById('platform-fee').innerText = fee.toFixed(2) + ' USDC';
        }

        function executeTrade() {
            const btn = document.getElementById('confirm-btn');
            const originalText = btn.innerHTML;
            const amount = document.getElementById('invest-amount').value;
            
            if(!amount || amount <= 0) return;

            // Loading State
            btn.innerHTML = `<div class="loading-spinner"></div> Processing on Avalanche`;
            btn.disabled = true;

            // Simulation sequence
            addLog(`Broadcasting transaction to Avalanche C-Chain...`, 'tx');
            
            setTimeout(() => {
                addLog(`Transaction Pending: Hash 0x8a1...3f9`, 'info');
            }, 1500);

            setTimeout(() => {
                addLog(`Interacting with Securitize Feeder Contract...`, 'tx');
            }, 2500);

            setTimeout(() => {
                addLog(`Transaction Confirmed! Block #34921055`, 'success');
                addLog(`Minted ${document.getElementById('token-est').innerText} SKHC to 0x71C...92F`, 'success');
                
                btn.innerHTML = `<i class="fa-solid fa-check"></i> Success`;
                btn.classList.replace('bg-white', 'bg-green-500');
                btn.classList.replace('text-slate-900', 'text-white');
                
                setTimeout(() => {
                    closeModal();
                    btn.innerHTML = originalText;
                    btn.disabled = false;
                    btn.classList.replace('bg-green-500', 'bg-white');
                    btn.classList.replace('text-white', 'text-slate-900');
                    switchTab('dashboard'); // Go back to dashboard to see "change"
                }, 1500);
            }, 4000);
        }

        function simulateGas() {
            const gas = Math.floor(Math.random() * (35 - 25) + 25);
            document.getElementById('gas-price').innerText = `${gas} nAVAX`;
        }

        // Init
        window.addEventListener('load', () => {
            initChart();
            setInterval(simulateGas, 5000);
            
            // Random background logs
            setInterval(() => {
                if(Math.random() > 0.7) {
                    const actions = [
                        'Syncing latest NAV data oracle...',
                        'Validating peer node connection...',
                        'Checking compliance registry updates...'
                    ];
                    addLog(actions[Math.floor(Math.random() * actions.length)]);
                }
            }, 8000);
        });

    </script>
</body>
</html>
